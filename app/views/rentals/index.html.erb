<section class="rentals">
  <header class="rentals__intro">
    <p class="rentals__eyebrow">Availability</p>
    <h1>Dumpster Rental Calendar</h1>
    <p class="rentals__lead">
      We keep three dumpsters in rotation. Each truck icon on any particular day represents one of our dumpsters booked for that day.
      If you see fewer than three icons, there is likely availability. Please call to confirm or schedule.
    </p>
  </header>

  <div class="rentals__legend">
    <div class="legend-item">
      <span class="legend-icon legend-icon--cycle" aria-hidden="true">
        <span><%= defined?(DUMPSTER_ICONS) ? DUMPSTER_ICONS["A"] : "ðŸ—‘ï¸" %></span>
        <span><%= defined?(DUMPSTER_ICONS) ? DUMPSTER_ICONS["B"] : "ðŸ—‘ï¸" %></span>
        <span><%= defined?(DUMPSTER_ICONS) ? DUMPSTER_ICONS["C"] : "ðŸ—‘ï¸" %></span>
        <span><%= defined?(DUMPSTER_ICONS) ? DUMPSTER_ICONS["D"] : "ðŸ—‘ï¸" %></span>
      </span>
      <span>Booked dumpster</span>
    </div>
    <div class="legend-item">
      <span class="legend-icon">ðŸ“ž</span>
      <%= link_to "Call to confirm availability", "tel:+17179065131", class: "legend-link" %>
    </div>
  </div>

  <div class="calendar-container">
    <%= month_calendar(starting_day: :sunday) do |date| %>
      <div class="calendar-day">
        <span class="date-number"><%= date.day %></span>
        <% @rentals.each do |rental| %>
          <% next if rental.start_time.blank? || rental.end_time.blank? %>
          <% if rental.start_time.to_date <= date && rental.end_time.to_date >= date %>
            <div class="rental" title="Booked dumpster">
              <%= rental.emoji %>
            </div>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>

  <p class="rentals__footer">Questions or ready to book? Give us a call and we will get you on the schedule.</p>
</section>
